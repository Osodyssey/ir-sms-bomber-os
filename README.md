تحلیل سورس کد و راهنمای کامل (README.md)

ابتدا به تحلیل تخصصی سورس کد ارائه شده می‌پردازیم و سپس یک فایل `README.md` جامع و حرفه‌ای برای آن تهیه می‌کنیم.

### **تحلیل تخصصی سورس کد**

این اسکریپت پایتون یک ابزار "بمباران پیامک" (SMS Bomber) است که با هدف ارسال تعداد زیادی پیامک OTP (رمز یکبار مصرف) به یک شماره تلفن مشخص، طراحی شده است. در ادامه، اجزای مختلف آن را به صورت فنی بررسی می‌کنیم:

**۱. کتابخانه‌های استفاده شده:**

*   **کتابخانه‌های استاندارد (Standard Libraries):**
    *   `argparse`: برای پیاده‌سازی یک رابط خط فرمان (CLI) حرفه‌ای استفاده شده است. این ماژول به کاربر اجازه می‌دهد تا پارامترهایی مانند شماره هدف، تعداد تکرار، تعداد تردها و پراکسی را به راحته به اسکریپت پاس دهد.
    *   `concurrent.futures`: قلب تپنده این اسکریپت برای اجرای همزمان (Concurrency) است. با استفاده از `ThreadPoolExecutor`، برنامه قادر است چندین درخواست HTTP را به صورت موازی ارسال کند. این کار به طرز چشمگیری سرعت عملیات را افزایش می‌دهد، زیرا برنامه منتظر پاسخ یک سرور نمی‌ماند و درخواست بعدی را ارسال می‌کند.
    *   `signal`: برای مدیریت سیگنال‌های سیستم‌عامل استفاده می‌شود. در این کد، به طور خاص `signal.SIGINT` (که معمولاً با فشردن `Ctrl+C` تولید می‌شود) را مدیریت می‌کند تا در صورت توقف ناگهانی توسط کاربر، برنامه به صورت کنترل‌شده و با نمایش یک پیام مناسب خارج شود (`_exit(1)`). این امر از نمایش خطاهای ناخواسته جلوگیری می‌کند.
    *   `datetime`: برای نمایش زمان دقیق ارسال هر درخواست در حالت `verbose` استفاده می‌شود که به کاربر درک بهتری از روند اجرای عملیات می‌دهد.
    *   `os._exit`: برای خروج فوری از برنامه استفاده می‌شود. برخلاف `sys.exit()`، این تابع بدون اجرای هیچ‌گونه cleanup handler (مانند بلوک‌های `finally`) برنامه را خاتمه می‌دهد که در شرایط توقف اضطراری کاربرد دارد.

*   **کتابخانه‌های شخص ثالث (Third-Party Libraries):**
    *   `requests`: کتابخانه استاندارد دوفاکتو برای ارسال درخواست‌های HTTP در پایتون است. در این کد برای ارسال درخواست‌های `POST` به APIهای مختلف استفاده می‌شود. قابلیت‌هایی مانند تنظیم `headers`, `json`, `timeout` و `proxies` به خوبی در آن به کار گرفته شده‌اند.
    *   `alive_progress`: یک کتابخانه بسیار جذاب برای نمایش نوارهای پیشرفت (Progress Bar) در ترمینال است. این کتابخانه تجربه کاربری (UX) را به شدت بهبود می‌بخشد، زیرا کاربر به صورت بصری می‌تواند پیشرفت عملیات را مشاهده کند.
    *   `colorama`: برای افزودن رنگ به خروجی ترمینال در سیستم‌عامل‌های مختلف (ویندوز، لینوکس، مک) استفاده می‌شود. این کار خوانایی خروجی را افزایش می‌دهد و وضعیت‌های موفق (سبز)، ناموفق (قرمز) و اطلاعاتی (زرد، فیروزه‌ای) را به وضوح متمایز می‌کند.
    *   `fake_headers`: این کتابخانه برای تولید هدرهای HTTP واقعی و تصادفی (مانند User-Agent) استفاده می‌شود. این کار به اسکریپت کمک می‌کند تا درخواست‌هایش کمتر توسط سیستم‌های امنیتی و فایروال‌ها به عنوان ربات شناسایی شوند و احتمال موفقیت درخواست‌ها را افزایش می‌دهد.

**۲. ساختار و منطق برنامه:**

*   **تابع `send_otp_requests(phone_number)`:** این تابع یک دیتابیس داخلی از APIهای سرویس‌های ایرانی است. هر API به صورت یک دیکشنری با کلیدهای `name`, `url` و `data` تعریف شده است. این ساختار ماژولار بوده و به راحتی می‌توان APIهای جدید را به آن اضافه یا APIهای از کار افتاده را حذف کرد. فرمت `data` برای هر سرویس متفاوت است که نشان‌دهنده تحلیل دقیق نویسنده از هر Endpoint است.

*   **تابع `parse_arguments()`:** این تابع مسئولیت مدیریت ورودی‌های کاربر از طریق خط فرمان را بر عهده دارد. تعریف آرگومان‌ها با نام‌های کوتاه (`-c`, `-t`) و بلند (`--count`, `--threads`) و همچنین ارائه متن راهنما (`help`)، استفاده از ابزار را برای کاربر نهایی ساده می‌کند.

*   **تابع `send_request(...)`:** این تابع وظیفه اصلی ارسال یک درخواست HTTP را انجام می‌دهد. نکات کلیدی در این تابع عبارتند از:
    *   تولید هدرهای جعلی برای هر درخواست.
    *   استفاده از بلوک `try...except` برای مدیریت خطاهای شبکه (`requests.exceptions.RequestException`). این کار باعث می‌شود برنامه در صورت بروز خطا در یک درخواست، متوقف نشود و به کار خود ادامه دهد.
    *   استفاده از `response.raise_for_status()` که یک روش خوب برای بررسی کدهای وضعیت HTTP است (کدهای 4xx و 5xx را به عنوان خطا در نظر می‌گیرد).
    *   بازگرداندن پیام‌های رنگی و فرمت‌بندی شده که وضعیت هر درخواست را به وضوح نشان می‌دهد.

*   **تابع `process_target(...)`:** این تابع به عنوان یک "worker" برای تردها عمل می‌کند و صرفاً تابع `send_request` را با پارامترهای مناسب فراخوانی می‌کند.

*   **تابع `main()`:** نقطه شروع و مرکز کنترل برنامه است. وظایف آن به ترتیب عبارتند از:
    1.  مقداردهی اولیه `colorama`.
    2.  تنظیم `signal handler` برای خروج امن.
    3.  خواندن و پردازش آرگومان‌های خط فرمان.
    4.  ایجاد `ThreadPoolExecutor` با تعداد تردهای مشخص شده توسط کاربر.
    5.  ایجاد لیست وظایف (futures) با تکرار لیست APIها به تعداد `count`.
    6.  استفاده از `concurrent.futures.as_completed()` برای پردازش نتایج به محض آماده شدن هر کدام. این روش بهینه‌تر از منتظر ماندن برای اتمام همه وظایف است و اجازه می‌دهد نوار پیشرفت به صورت real-time به‌روز شود.
    7.  نمایش نتایج نهایی و خلاصه عملیات.

**نتیجه‌گیری تحلیل:**
این سورس کد به صورت حرفه‌ای و تمیز نوشته شده است. استفاده از ابزارهای مناسب برای هر کار (مانند `argparse` برای CLI، `concurrent.futures` برای پردازش موازی و `alive_progress` برای UX) نشان‌دهنده دانش و تجربه نویسنده (osodyssey) است. کد ساختاریافته، خوانا و قابل توسعه است.

---

### **فایل README.md**

در ادامه، یک فایل `README.md` حرفه‌ای بر اساس تحلیل فوق برای این پروژه آماده شده است.

---

# 💣 SMS Bomber [ توسعه یافته توسط osodyssey ]

![Banner](https://user-images.githubusercontent.com/82324900/180538965-e918d336-418e-4965-8b22-e30064a7f05b.png)

یک اسکریپت قدرتمند و چندنخی (Multi-threaded) به زبان پایتون برای ارسال انبوه پیامک (SMS Bombing) به شماره‌های ایران. این ابزار از مجموعه‌ای از APIهای عمومی وب‌سرویس‌های ایرانی برای ارسال پیامک‌های OTP (رمز یکبار مصرف) استفاده می‌کند.

[![Python](https://img.shields.io/badge/Python-3.x-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)

---

### **⚠️ هشدار و سلب مسئولیت**

**استفاده نادرست از این ابزار می‌تواند غیرقانونی و غیراخلاقی باشد.** نویسنده (osodyssey) و توسعه‌دهندگان هیچ‌گونه مسئولیتی در قبال استفاده غیرمجاز یا آسیب‌رسان از این اسکریپت بر عهده ندارند. این پروژه صرفاً با اهداف آموزشی و تست نفوذ (Penetration Testing) ایجاد شده است. لطفاً از این ابزار فقط روی شماره خودتان یا با رضایت کامل شخص مورد نظر استفاده کنید.

---

### ✨ **ویژگی‌های کلیدی**

*   **🚀 پردازش موازی و سریع:** استفاده از `ThreadPoolExecutor` برای ارسال همزمان درخواست‌ها و افزایش چشمگیر سرعت.
*   **🎯 مجموعه گسترده API:** شامل لیستی به‌روز از APIهای ده‌ها سرویس محبوب ایرانی.
*   **🎨 رابط کاربری جذاب:** نمایش نوار پیشرفت زیبا (`alive_progress`) و خروجی‌های رنگی (`colorama`) برای تجربه کاربری بهتر.
*   **🛡️ شبیه‌سازی درخواست‌های واقعی:** تولید هدرهای جعلی (`fake_headers`) برای هر درخواست جهت عبور از سیستم‌های امنیتی ساده.
*   **⚙️ کاملاً قابل تنظیم:** امکان تعیین شماره هدف، تعداد پیامک برای هر API، و تعداد تردها از طریق خط فرمان.
*   **🌐 پشتیبانی از پراکسی:** قابلیت ارسال درخواست‌ها از طریق پراکسی HTTP/HTTPS برای مخفی کردن IP.
*   **📈 گزارش‌دهی دقیق:** نمایش خلاصه نتایج (تعداد درخواست‌های موفق و ناموفق) در پایان عملیات.

---

### **🛠️ نصب و راه‌اندازی**

برای استفاده از این اسکریپت، مراحل زیر را دنبال کنید. شما باید `Python 3` و `Git` را روی سیستم خود نصب داشته باشید.

**۱. کلون کردن پروژه از گیت‌هاب:**

ابتدا ترمینال یا Command Prompt را باز کرده و دستور زیر را برای دریافت سورس کد از مخزن گیت‌هاب وارد کنید:

```bash
git clone https://github.com/osodyssey/sms-bomber.git
```

**۲. ورود به پوشه پروژه:**

با دستور `cd` وارد پوشه‌ای که کلون کرده‌اید شوید:

```bash
cd sms-bomber
```

**۳. نصب کتابخانه‌های مورد نیاز:**

این پروژه به چند کتابخانه پایتون نیاز دارد که در فایل `requirements.txt` لیست شده‌اند. با استفاده از `pip` آن‌ها را نصب کنید:

```bash
pip install -r requirements.txt
```

اکنون ابزار آماده استفاده است!

---

### **👨‍💻 نحوه استفاده**

این ابزار از طریق خط فرمان (CLI) اجرا می‌شود. ساختار کلی دستور به شکل زیر است:

```bash
python main.py [شماره هدف] [آرگومان‌ها]
```

**آرگومان‌ها:**

| آرگومان کوتاه | آرگومان بلند | توضیحات                                        | مقدار پیش‌فرض |
| :----------- | :------------ | :---------------------------------------------- | :------------ |
| `(موقعیت اول)` | `target`      | **(الزامی)** شماره تلفن هدف با فرمت `09xxxxxxxxx` | -             |
| `-c`         | `--count`     | تعداد دفعات ارسال پیامک برای *هر* API          | `1`           |
| `-t`         | `--threads`   | تعداد ترد‌های همزمان برای ارسال درخواست‌ها     | `5`           |
| `-v`         | `--verbose`   | نمایش جزئیات هر درخواست (موفق/ناموفق) در حین اجرا | `False`       |
| `-x`         | `--proxy`     | تنظیم پراکسی HTTP/HTTPS برای ارسال درخواست‌ها    | `None`        |

**مثال‌های کاربردی:**

*   **ارسال استاندارد (یک بار به همه APIها):**

    ```bash
    python main.py 09123456789
    ```

*   **افزایش تعداد پیامک‌ها:**
    ارسال 5 پیامک از *هر* API (اگر ۴۰ API فعال باشد، در مجموع ۲۰۰ پیامک ارسال می‌شود):

    ```bash
    python main.py 09123456789 -c 5
    ```

*   **افزایش سرعت با تردهای بیشتر:**
    استفاده از 10 ترد همزمان برای ارسال سریع‌تر:

    ```bash
    python main.py 09123456789 -t 10
    ```

*   **حالت نمایش جزئیات (Verbose):**
    برای مشاهده وضعیت هر درخواست به صورت لحظه‌ای:

    ```bash
    python main.py 09123456789 -v
    ```

*   **استفاده از پراکسی:**
    برای ارسال درخواست‌ها از طریق یک پراکسی مشخص:

    ```bash
    python main.py 09123456789 -x http://127.0.0.1:8080
    ```

*   **یک حمله ترکیبی و قدرتمند:**
    ارسال 3 پیامک از هر API، با 20 ترد همزمان، به همراه نمایش جزئیات:

    ```bash
    python main.py 09123456789 -c 3 -t 20 -v
    ```

---

### **🏗️ ساختار کد و توضیح توابع**

*   `main.py`: فایل
